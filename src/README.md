# In this folder

`my_exp_datagen1.m`: Matlab script to generate the database for NI-FECG,
  mECG, fECG signals with their corresponding mQRS and fQRS.
  
`my_clean_crompess.h`: Helper Matlab script to reduce the size of the
files generated by the `my_exp_datagen1.m` script. This is a modified
version of the FECGSYN's matlab script. This version DOES NOT remove
the `mixture` (mother and fetus = NIFECG) signal.

NOTE: You can find the original "exp_datageb1.m" file with all the cases for generating different types of NI-FECG in the "fecgsyn" project in the folder "fecgsyn-master/examples/exp_datagen1.m".

## Instructions to generate the files with the NI-FECG signals

1. Unzip the fecgsyn-master.zip file in the "external_src" folder of this project.
2. Add the fecgsyb-master folder (and all its subfolders) to the MatLab path.
3. Create the folders `output_data/baseline` and `output_data/heart_rate_variable` in the same path as the script files.
4. Run the `my_exp_datagen1.m` script. This will generate `*.csv` files in the `output_data` folders:
* mecg - mother ECG
* fecg - fetal ECG
* mqrs - mother QRS
* fqrs - fetal QRS
* nifecg - non-invasive fetal ECG
   
## Optional instructions

### Keeping FULL data from the simulator

The file `my_clean_compress.m` reduce the resulting size of the vector data
generated by the simulator. If you require the FULL data then comment
the line on the `my_exp_datagen1.m` script that calls the method
`my_clean_compress()`

### Modifying the number of generated samples

You can change the number of generated signals by changing the value of the variable `n_samples`. The larger the number of smaples the more time it takes to produce the signals and more disk space requires to store them.

### Change the range for the fetal and the mother heart rates on the produced signals

You can change the ranges for the fetal and the mother heart rates. Consider that a healthy mother heart rate is within the range [70-90] bpm, and a healthy fetal heart rate is within the range [120-160] bpm (in average based on the pregnancy week).

Check the following resources for precise values on heart rates

#### Normal heart-rate for adult
The normal heart-rate for an adult is around 60-100 bpm

Sources
* https://bebodywise.com/blog/normal-pulse-rate-during-pregnancy/
* https://www.mayoclinic.org/healthy-lifestyle/fitness/expert-answers/heart-rate/faq-20057979#:~:text=A%20normal%20resting%20heart%20rate%20for%20adults%20ranges%20from%2060,to%2040%20beats%20per%20minute.

#### Normal women heart-rate during pregnancy

The normal heart-rate for a pregnant woman is around 70 - 90 bpm

Sources
* https://www.medicalnewstoday.com/articles/heart-rate-during-pregnancy#abnormal-heart-rate
* https://www.msdmanuals.com/home/women-s-health-issues/normal-pregnancy/physical-changes-during-pregnancy#:~:text=During%20pregnancy%2C%20the%20amount%20of,as%2090%20beats%20per%20minute.

A heart-rate greater than 140 bpm may damage the baby

Source
https://bebodywise.com/blog/normal-pulse-rate-during-pregnancy/

#### Normal heart-rate for fetus

The normal heart-rate for a fetus is about twice the normal adults
heart-rate. It varies according to its week of conception but slowing
to a normal heart-rate in the last 10 weeks of pregnancy.

* Between 110 - 160 bpm with variations by 5 to 25 bpm.
* Between 120 - 160 bpm
* Between 120 - 180 bpm

Sources
* https://www.hopkinsmedicine.org/health/treatment-tests-and-therapies/fetal-heart-monitoring#:~:text=The%20average%20fetal%20heart%20rate,that%20there%20are%20other%20problems
* https://www.ncbi.nlm.nih.gov/pmc/articles/PMC3678114/
* https://www.verywellfamily.com/what-is-a-normal-fetal-heart-rate-2758733

#### Problems with heart-rate

* Tachycardia: When your heart beats too fast, usually more than 100
beats a minute.

* Bradycardia: When your heart beats too slowly, below 60 beats a minute.

Source
* https://www.onhealth.com/content/1/about_your_heart_rate_what_to_know
